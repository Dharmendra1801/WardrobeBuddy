<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wardrobe Testing</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        input, button { margin: 5px; padding: 5px; }
        .section { margin-bottom: 30px; border-bottom: 1px solid #ccc; padding-bottom: 20px; }
        #message { color: green; }
        pre { background: #f4f4f4; padding: 10px; }
    </style>
</head>
<body>
<h1>Wardrobe Testing</h1>

<div>
    <label>Auth Token: <input type="text" id="authToken" placeholder="Paste your token here"></label>
    <label>Username: <input type="text" id="username" placeholder="Username"></label>
</div>

<div class="section">
    <h2>Create Wardrobe</h2>
    <input type="text" id="wardrobeName" placeholder="Wardrobe Name">
    <button onclick="createWardrobe()">Create</button>
</div>

<div class="section">
    <h2>Check Wardrobe</h2>
    <input type="text" id="checkWardrobeName" placeholder="Wardrobe Name">
    <button onclick="checkWardrobe()">Check</button>
</div>

<div class="section">
    <h2>Delete Wardrobe</h2>
    <input type="text" id="deleteWardrobeName" placeholder="Wardrobe Name">
    <button onclick="deleteWardrobe()">Delete</button>
</div>

<div class="section">
    <h2>Show Wardrobe</h2>
    <input type="text" id="showWardrobeName" placeholder="Wardrobe Name">
    <button onclick="showWardrobe()">Show</button>
    <pre id="wardrobeData"></pre>
</div>

<div class="section">
    <h2>Show All Wardrobes</h2>
    <button onclick="showAllWardrobes()">Show All</button>
    <pre id="allWardrobes"></pre>
</div>

<div id="message"></div>

<script>
    function getHeaders() {
        const token = document.getElementById("authToken").value;
        return { "auth_token": token, "Content-Type": "application/json" };
    }

    function getUsername() {
        return document.getElementById("username").value;
    }

    function createWardrobe() {
        const name = document.getElementById("wardrobeName").value;
        fetch(`/api/${getUsername()}/create_wardrobe`, {
            method: "POST",
            headers: getHeaders(),
            body: JSON.stringify({ wardrobeName: name })
        })
        .then(res => res.text())
        .then(msg => document.getElementById("message").innerText = msg);
    }

    function checkWardrobe() {
        const name = document.getElementById("checkWardrobeName").value;
        fetch(`/api/${getUsername()}/check_wardrobe/${name}`, { headers: getHeaders() })
        .then(res => res.text())
        .then(msg => document.getElementById("message").innerText = msg);
    }

    function deleteWardrobe() {
        const name = document.getElementById("deleteWardrobeName").value;
        fetch(`/api/${getUsername()}/delete_wardrobe/${name}`, { method: "DELETE", headers: getHeaders() })
        .then(res => res.text())
        .then(msg => document.getElementById("message").innerText = msg);
    }

    function showWardrobe() {
        const name = document.getElementById("showWardrobeName").value;
        fetch(`/api/${getUsername()}/show_wardrobe/${name}`, { headers: getHeaders() })
        .then(res => res.json())
        .then(data => document.getElementById("wardrobeData").innerText = JSON.stringify(data, null, 2));
    }

    function showAllWardrobes() {
        fetch(`/api/${getUsername()}/show_all_wardrobes`, { headers: getHeaders() })
        .then(res => res.json())
        .then(data => document.getElementById("allWardrobes").innerText = JSON.stringify(data, null, 2));
    }
</script>
</body>
</html>
